
<div class="container-fluid">
    <div class="row">
        <app-side-bar></app-side-bar>
        <div class="col main-content">
            <!-- Start your code here -->

            <div class="row">
                 <!--store keeper list card-->
                 <div class="col-lg-5 col-12">
                  <div class="card" style="min-height: 670px">
                    <div class="card-body">
                      <h4 class="card-title text-primary mb-3">Storekeepers</h4>
        
                      <div class="input-group mb-4">
                        <input
                          type="text"
                          class="form-control"
                          [(ngModel)]="searchText"
                          placeholder="Search storekeeper by ID number"
                          (keyup)="onSearch()"
                        />
                        <div class="input-group-append">
                          <button
                            class="btn btn-outline-primary search-bar"
                            type="button"
                            (click)="onSearch()"
                          >
                            <i-feather class="mr-2" name="search"></i-feather>
                          </button>
                        </div>
                      </div>
                      <div
                        *ngIf="
                          storekeepers != null;
                          then renderStorekeeperList;
                          else loadingStorekeeperList
                        "
                      ></div>
        
                      <ng-template #renderStorekeeperList>
                        <ul class="list-unstyled">
                          <li
                          *ngFor="let storekeeper of storekeepersFilter || storekeepers"
                            class="row driver-details align-items-center py-1"
                            (click)="onStorekeeperSelected(storekeeper)"
                          >
                            <div class="col-1"><div class="circle"></div></div>
                            <div class="col-8 pl-4">
                              <span class="d-block"
                                ><b>Storekeeper ID : </b>{{ storekeeper._id}}</span
                              >
                              <span class="d-block"
                                ><b>Storekeeper Name : </b>{{ storekeeper.name.first }}
                                {{ storekeeper.name.middle }} {{ storekeeper.name.last }}</span
                              >
                            </div>
                            <div class="col-3">
                              <button
                                class="btn float-right"
                                
                              >
                                <i-feather
                                (click)="confirmDelete(deleteModal)"
                                  name="trash-2"
                                  class="text-danger"
                                >
                              </i-feather>
                              </button>
                            </div>
                          </li>
                        </ul>
                      </ng-template>
                       <!-- delete-confirmation modal (template variable called in comfirmUpdate(areYouSure) ) -->
              <ng-template #deleteModal>
                <div class="modal-body text-center">
                  <h4 class="mb-2 text-primary">Are you sure?</h4>
                  <p class="mb-3">
                    Now you are requesting to delete the record of<br />
                    <b class="d-inline-block"
                      >{{ selectedStorekeeper.name.first }}
                      {{selectedStorekeeper.name.middle }}
                      {{ selectedStorekeeper.name.last }}</b
                    >
                    <br />
                    click Yes to proceed and No to cancel the process
                  </p>
                  <div class="text-center">
                    <button
                      type="button"
                      class="mx-2 btn btn-default"
                      (click)="onDelete(selectedStorekeeper)"
                    >
                      Yes
                    </button>
                    <button
                      type="button"
                      class="mx-2 btn btn-primary"
                      (click)="decline()"
                    >
                      No
                    </button>
                  </div>
                </div>
              </ng-template>
              <!-- end-of confiramation modal -->
                      <ng-template #loadingStorekeeperList>
                        <div class="row" style="min-height: 550px">
                          <div class="col-12 my-auto text-center">
                            <i-feather name="loader"></i-feather>
                          </div>
                        </div>
                      </ng-template>
                    </div>
                  </div>
                </div>
                <!-- details form card -->
                <div class="col-lg-7 col-12 mt-sm-3 mt-lg-0">
                    <div class="card">
                        <div class="card-body ">
                            <!-- nav part -->
                            <ul ngbNav #nav="ngbNav" class="nav-tabs">
                                <li ngbNavItem>
                                  <a ngbNavLink>Details</a>
                                  <ng-template ngbNavContent>
                                    <div *ngIf="selectedStorekeeper!=null; then renderDetails else selectAStorekeeper"></div>
                                    <ng-template #renderDetails>
                                      <h4 class="text-primary  mt-3">
                                        Details of {{selectedStorekeeper.name.first}} {{selectedStorekeeper.name.middle}} {{selectedStorekeeper.name.last}}
                                      </h4>
                                    <form [formGroup]="updateStorekeeperForm">
                                        <div class="row">
                                            <div class="col-9">
                                              <div class="form-group" formGroupName="name">
                                                        <label for="name">Name</label>
                                                        <input type="text" class="form-control mt-2" id="de_firstname" placeholder="First name" formControlName="first">
                                                        <input type="text" class="form-control mt-1" id="de_middlename" placeholder="Middle name" formControlName="middle">
                                                        <input type="text" class="form-control mt-1" id="de_lastname" placeholder="Last name" formControlName="last">             
                                              </div>
                                              <div class="form-group" formGroupName="address">
                                                <label for="address">Address</label>
                                                <input type="text" class="form-control mt-2" id="de_Door" placeholder="Door number" formControlName="no">
                                                <input type="text" class="form-control mt-1" id="de_street" placeholder="Street" formControlName="street">
                                                <input type="text" class="form-control mt-1" id="de_city" placeholder="City" formControlName="city">
                                              
                                              </div>
                                              <div class="form-group" formGroupName="contact">  
                                              <label for="contact">Contact</label>
                                              <input type="email" class="form-control mt-2" id="de_email" placeholder="email" formControlName="email">
                                              <input type="text" class="form-control mt-1" id="de_phone" placeholder="Mobile" formControlName="phone">
                                            
                                              </div>
                                            </div>
                                            <div class="col-3">
                                                <div class="profile-circle"></div>
                                                <br><br><br><br>
                                                <button type="submit" class="btn btn-primary button ml-4">Save</button><br><br>
                                                <button type="submit" class="btn btn-primary button ml-4">Cancel</button>
                                            </div>
                                        </div>
                                    </form>
                                    </ng-template>
                                    <ng-template #selectAStorekeeper>
                                        <div class="h4 mt-3 text-center text-primary">
                                            please select a storekeeper to view details
                                        </div>
                                    </ng-template>
                                  </ng-template>
                                </li>
                                <li ngbNavItem>
                                  <a ngbNavLink>Add new</a>
                                  <ng-template ngbNavContent>
                                    <h4 class="text-primary  mt-3">
                                        Register a new storekeeper  
                                    </h4>
                                    <form>
                                        <div class="row">
                                            <div class="col-9">
                                              <div class="form-group">
                                                        <label for="name">Name</label>
                                                        <input type="text" class="form-control" id="ad_firstname" placeholder="First name">
                                                        <input type="text" class="form-control" id="ad_middlename" placeholder="Middle name">
                                                        <input type="text" class="form-control" id="ad_lastname" placeholder="Last name">
                                              </div>
                                              <div class="form-group">

                                                <label for="address">Address</label>
                                                <input type="text" class="form-control" id="ad_Door" placeholder="Door number">
                                                <input type="text" class="form-control" id="ad_street" placeholder="Street">
                                                <input type="text" class="form-control" id="ad_city" placeholder="City">

                                              </div>
                                              <div class="form-group">

                                              <label for="contact">Contact</label>
                                              <input type="email" class="form-control" id="ad_email" placeholder="email">
                                              <input type="text" class="form-control" id="ad_phone" placeholder="Mobile">

                                              </div>
                                            </div>
                                            <div class="col-3">
                                                <div class="profile-circle"></div>
                                                <br><br><br><br>
                                                <button type="submit" class="btn btn-primary button ml-4">Save</button><br><br>
                                                <button type="submit" class="btn btn-primary button ml-4">Cancel</button>
                                            </div>
                                        </div>
                                    </form>
                                  </ng-template>
                                </li>
                              </ul>

                              <div [ngbNavOutlet]="nav" class="mt-2"></div>

                        </div>
                    </div>


                </div>
            </div> 

            <div class="row mt-3">
                <!-- history list -->
                <div class="col-lg-7  col-12">
                    <div class="card">
                        <div class="card-body ">
                            <div class="row">
                                <div class="col-7">
                            <h4 class="card-title stext">xxx schedule history</h4>
                        </div>
                        <div class="col-5">
                            <div class="input-group">
                                <input type="text" class="form-control" placeholder="Search" name="search" width="50px">
                                <div class="input-group-btn">
                                    <button class="btn btn-default" type="submit"><i-feather class="mr-2"
                                        name="search"></i-feather></button>
                                </div>
                            </div>
                        </div>
                        </div>
                        <br/>
                        <app-data-table></app-data-table>
                        
                        </div>
                        </div>
                    </div>

                <!-- schedule list -->
                <div class="col-lg-5 col-12  mt-sm-3 mt-lg-0">
                    <div class="card">
                         <div class="card-body ">
                              <h4 class="card-title stext">xxx schedule history</h4><br>
                              <div class="d-flex justify-content-center">
                              <div class="input-group">
                                <input type="text" class="form-control" placeholder="Search" name="search" width="10px" >
                                <div class="input-group-btn">
                                    <button class="btn btn-default" type="submit"><i-feather class="mr-2"
                                        name="search"></i-feather></button>
                                </div>
                            </div>
                        </div>
                        <br>

                    <!-- <div class="row"> -->
                        <div class="d-flex flex-row">
                            <div class="mr-auto p-0">
                        <div class="d-flex flex-column-reverse">
                        <div class="col-9">
                          <div class="card">
                            <div class="card-body">
                              <h5 class="card-title">Special title 1</h5>
                              <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>

                            </div>
                          </div>
                        </div>
                        <div class="col-3"></div>
                        <br>
                        <div class="col-sm-9">
                          <div class="card">
                            <div class="card-body">
                              <h5 class="card-title">Special title 2</h5>
                              <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>

                            </div>
                          </div>
                        </div>
                      </div>
                        </div>
                        <div class="p-2">

                        </div>


                    </div>



                    <!-- </div> -->
                    </div>
                    </div>
            </div>

        </div>
    </div>
</div>  
